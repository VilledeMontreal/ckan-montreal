{"version":3,"sources":["../../datapackage-views-js/dist/App.js","../../datapackage-views-js/dist/Table.js","../../datapackage-views-js/dist/Map.js","../../datapackage-views-js/dist/Document.js","../../datapackage-views-js/dist/Chart.js","../../datapackage-views-js/dist/utils.js","../node_modules/tableschema/lib/profiles sync /^/.//.*/.json$","utils/index.js","reducers/widgets.js","reducers/datapackage.js","reducers/datastoreFilters.js","reducers/serializedState.js","reducers/rootReducer.js","store.js","components/DataView/index.js","components/Share/index.js","utils/loadDataset.js","actions/index.js","App.js","AppWithProvider.js","serviceWorker.js","index.js"],"names":["Object","defineProperty","exports","value","DataView","props","loading","_react","default","createElement","className","_reactLoaderSpinner","type","color","height","width","countViews","datapackage","views","length","_loop","i","view","resources","_values","data","specType","_handsOnTableToHandsO","_datapackageRender","handsOnTableToHandsOnTable","options","source","excluded","key","target","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_objectWithoutProperties","v","_Table","ref","table","window","concat","id","_Map","geoData","_utils","e","_Document","file","path","plotlySpec","simpleToPlotly","_Chart","spec","vegaSpec","vegaToVega","_reactVega","unavailable","href","_ret","_typeof","_interopRequireDefault","__webpack_require__","obj","__esModule","Symbol","iterator","constructor","_react2","_reactCsv","_defineProperties","descriptor","enumerable","configurable","writable","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","_defineProperty","Table","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","this","newData","setState","settings","assign","state","Array","isArray","headers","colHeaders","map","x","row","forEach","header","JSON","stringify","blob","Blob","link","document","URL","createObjectURL","download","viewTitle","body","appendChild","click","removeChild","licenseKey","protoProps","staticProps","subClass","superClass","create","_inherits","Component","CSVLink","filename","onClick","downloadJson","HotTable","totalrowcount","align","rowcount","bounds","_leaflet","geoJSON","getBounds","features","NODE_ENV","PUBLIC_URL","JEST_WORKER_ID","center","getCenter","lat","lng","_reactLeaflet","Map","zoom","style","TileLayer","attribution","url","GeoJSON","onEachFeature","feature","layer","properties","name","bindPopup","Icon","Default","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","desc","set","_interopRequireWildcard","_reactPdfJs","WeakMap","_slicedToArray","arr","_arrayWithHoles","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","_iterableToArrayLimit","_nonIterableRest","_default","_useState2","useState","page","setPage","_useState4","pages","setPages","canvasEl","useRef","_usePdf2","usePdf","numPages","useEffect","previousButton","nextButton","renderPagination","Plot","_factory","_plotly","layout","getLonLat","fields","field","numeric","match","val","isNaN","tableToGeoData","schema","geometryFieldNames","geometryField","find","includes","toLowerCase","getGeometryFromRecord","geometry","coordinates","lonField","latField","console","warn","geopointField","format","split","item","trim","latitudeFieldNames","longitudeFieldNames","infobox","eval","parse","parts","replace","parseCoordinateString","lon","parseFloat","coord","dms","deg","m","toDeg","./geojson.json","./table-schema.json","./topojson.json","webpackContext","req","webpackContextResolve","Error","code","resolve","module","unloadDatapackage","unloadedDatapackage","deepClone","resource","reducers_widgets","arguments","action","stateForChartBuilder","widget","payload","stateForMapBuilder","widgets","reducers_datapackage","datastoreFilters","reducers_serializedState","root","clonedRoot","serializedState","rootReducer","initialState","configureStore","createStore","composeWithDevTools","applyMiddleware","thunk","react_default","a","react_loader_default","loaded","position","dist_App","Math","random","slimProps","Share","prop","slim","shareLink","iframe","shareable","copy","str","el","setAttribute","left","select","execCommand","toArray","require","parseDatapackageIdentifier","stringOrJSON","loadDataset","_ref","asyncToGenerator","regenerator_default","mark","_callee2","dpID","DP_ID","tabularFormats","dataset","wrap","_context2","prev","Dataset","load","sent","Promise","all","_ref2","_callee","response","result","fileInline","rowStream","_response","_result","_context","displayName","abrupt","fetch","ok","json","records","count","total","open","values","addSchema","rows","size","keyed","t0","stop","_x2","apply","_x","selectTab","res","_objectSpread","datapackageLoad","fetchDataBegin","fetchDataSuccess","connect","App_objectSpread","dispatch","filterUIAction","getState","newResource","updatedDatapackage","loadingWidgets","loadedDataset","datastore_active","compileView","fetchDataAction","_x3","dataViewBuilderAction","actionType","selectTabAction","index","active","activeWidget","selectedTab","tabLinks","lib","to","tabContents","for","chart_builder_dist","map_builder_dist","dist","filterBuilderAction","renderActiveTabContentOnly","handleSelect","AppWithProvider","_unused","log","widgetNames","tabularmap","simple","widgetsFromViews","es","store","src_App_0","Boolean","location","hostname","instances","getElementsByClassName","_step","_iterator","_iteratorNormalCompletion","getAttribute","rest","objectWithoutProperties","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e50c2f95.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DataView = DataView;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactVega = _interopRequireDefault(require(\"react-vega\"));\n\nrequire(\"./index.css\");\n\nrequire(\"./App.css\");\n\nvar _Table = _interopRequireDefault(require(\"./Table.js\"));\n\nvar _Map = _interopRequireDefault(require(\"./Map.js\"));\n\nvar _Document = _interopRequireDefault(require(\"./Document.js\"));\n\nvar _Chart = _interopRequireDefault(require(\"./Chart.js\"));\n\nvar _datapackageRender = require(\"datapackage-render\");\n\nvar _reactLoaderSpinner = _interopRequireDefault(require(\"react-loader-spinner\"));\n\nvar _utils = _interopRequireDefault(require(\"./utils\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction DataView(props) {\n  if (props.loading) {\n    return _react.default.createElement(\"div\", {\n      className: \"App\"\n    }, _react.default.createElement(\"div\", {\n      className: \"container m-24\"\n    }, _react.default.createElement(_reactLoaderSpinner.default, {\n      type: \"Grid\",\n      color: \"#D3D3D3\",\n      height: \"50\",\n      width: \"50\"\n    })));\n  }\n\n  var countViews = props.datapackage.views ? props.datapackage.views.length : 0;\n\n  if (countViews === 0) {\n    return _react.default.createElement(\"div\", {\n      className: \"App\"\n    }, \"No views available\");\n  }\n\n  var _loop = function _loop(i) {\n    var view = props.datapackage.views[i];\n\n    if (!view.resources[0]._values && view.resources[0].data) {\n      view.resources[0]._values = view.resources[0].data;\n    }\n\n    if (view.specType === 'table' && view.resources[0]._values) {\n      var _handsOnTableToHandsO = (0, _datapackageRender.handsOnTableToHandsOnTable)(view),\n          data = _handsOnTableToHandsO.data,\n          options = _objectWithoutProperties(_handsOnTableToHandsO, [\"data\"]);\n\n      return {\n        v: _react.default.createElement(\"div\", {\n          className: \"App\"\n        }, _react.default.createElement(\"div\", {\n          className: \"container m-24\"\n        }, _react.default.createElement(_Table.default, {\n          data: data,\n          options: options,\n          ref: function ref(table) {\n            window[\"table\".concat(view.id)] = table;\n          }\n        })))\n      };\n    } else if (view.specType === 'map' && view.resources[0]._values) {\n      return {\n        v: _react.default.createElement(\"div\", {\n          className: \"App\"\n        }, _react.default.createElement(\"div\", {\n          className: \"container m-24\"\n        }, _react.default.createElement(_Map.default, {\n          data: view.resources[0]._values\n        })))\n      };\n    } else if (view.specType === 'tabularmap' && view.resources[0]._values) {\n      var geoData;\n\n      try {\n        geoData = (0, _utils.default)(view);\n        return {\n          v: _react.default.createElement(\"div\", {\n            className: \"App\"\n          }, _react.default.createElement(\"div\", {\n            className: \"container m-24\"\n          }, _react.default.createElement(_Map.default, {\n            data: geoData\n          })))\n        };\n      } catch (e) {\n        return {\n          v: _react.default.createElement(\"div\", {\n            className: e\n          })\n        };\n      }\n    } else if (view.specType === 'document') {\n      return {\n        v: _react.default.createElement(\"div\", {\n          className: \"App\"\n        }, _react.default.createElement(\"div\", {\n          className: \"container m-24\"\n        }, _react.default.createElement(_Document.default, {\n          file: view.resources[0].path\n        })))\n      };\n    } else if (view.specType === 'simple') {\n      var plotlySpec;\n\n      try {\n        plotlySpec = (0, _datapackageRender.simpleToPlotly)(view);\n\n        if (plotlySpec) {\n          return {\n            v: _react.default.createElement(\"div\", {\n              className: \"App\"\n            }, _react.default.createElement(\"div\", {\n              className: \"container m-24\"\n            }, _react.default.createElement(_Chart.default, {\n              spec: plotlySpec\n            })))\n          };\n        }\n      } catch (e) {\n        return {\n          v: _react.default.createElement(\"div\", {\n            className: e\n          })\n        };\n      }\n    } else if (view.specType === 'vega') {\n      var vegaSpec;\n\n      try {\n        vegaSpec = (0, _datapackageRender.vegaToVega)(view);\n        return {\n          v: _react.default.createElement(_reactVega.default, {\n            spec: vegaSpec\n          })\n        };\n      } catch (e) {\n        return {\n          v: _react.default.createElement(\"div\", {\n            className: e\n          })\n        };\n      }\n    } else if (view.resources[0].unavailable) {\n      return {\n        v: _react.default.createElement(\"div\", {\n          className: \"App\"\n        }, _react.default.createElement(\"div\", {\n          className: \"container m-24\"\n        }, _react.default.createElement(\"p\", null, \"Data view unavailable.\"), _react.default.createElement(\"a\", {\n          href: view.resources[0].path,\n          className: \"text-primary font-bold\"\n        }, \"Download the data.\")))\n      };\n    }\n  };\n\n  for (var i = 0; i < countViews; i++) {\n    var _ret = _loop(i);\n\n    if (_typeof(_ret) === \"object\") return _ret.v;\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _react2 = require(\"@handsontable/react\");\n\nvar _reactCsv = require(\"react-csv\");\n\nrequire(\"./Table.css\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Table =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Table, _React$Component);\n\n  function Table(props) {\n    var _this;\n\n    _classCallCheck(this, Table);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Table).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"updateData\", function (newData) {\n      _this.setState({\n        data: newData\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addSettings\", function (settings) {\n      _this.setState({\n        settings: Object.assign({}, _this.state.settings, settings)\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"downloadJson\", function () {\n      var data = _this.state.data; // If rows are arrays, we want to convert to objects:\n\n      if (data && Array.isArray(data[0])) {\n        var headers = _this.state.settings.colHeaders;\n        data = data.map(function (x) {\n          var row = {};\n          headers.forEach(function (header, i) {\n            row[header] = x[i];\n          });\n          return row;\n        });\n      }\n\n      data = JSON.stringify(data, null, 2);\n      var blob = new Blob([data], {\n        type: 'application/json'\n      });\n      var link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = \"\".concat(_this.state.settings.viewTitle, \".json\");\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    });\n\n    _this.state = {\n      data: _this.props.data,\n      settings: Object.assign({}, _this.props.options, {\n        licenseKey: \"non-commercial-and-evaluation\"\n      })\n    };\n    return _this;\n  }\n\n  _createClass(Table, [{\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(\"div\", null, _react.default.createElement(\"div\", {\n        className: \"downloadables hidden\"\n      }, _react.default.createElement(\"span\", null, \"Download preview data:\"), _react.default.createElement(_reactCsv.CSVLink, {\n        data: this.state.data,\n        headers: this.state.settings.colHeaders,\n        filename: \"\".concat(this.state.settings.viewTitle, \".csv\"),\n        className: \"btn btn-primary\",\n        target: \"_blank\"\n      }, \"CSV (Excel)\"), _react.default.createElement(\"button\", {\n        onClick: this.downloadJson,\n        className: \"btn btn-primary\"\n      }, \"JSON\")), _react.default.createElement(_react2.HotTable, {\n        data: this.state.data,\n        width: \"100%\",\n        height: \"300\",\n        settings: this.state.settings\n      }), this.state.settings.totalrowcount && _react.default.createElement(\"div\", {\n        align: \"right\"\n      }, \"Showing rows 1-\", this.state.settings.rowcount, \" out of \", this.state.settings.totalrowcount));\n    }\n  }]);\n\n  return Table;\n}(_react.default.Component);\n\nexports.default = Table;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _leaflet = _interopRequireDefault(require(\"leaflet\"));\n\nvar _reactLeaflet = require(\"react-leaflet\");\n\nrequire(\"./Map.css\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Following is the fix for invalid leaflet assets. Please, check this issue\n// for details - https://github.com/Leaflet/Leaflet/issues/4968\n\n\ndelete _leaflet.default.Icon.Default.prototype._getIconUrl;\n\n_leaflet.default.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\n\nfunction _default(props) {\n  var geojson = _leaflet.default.geoJSON(props.data); // Find the bound of the geojson returnup LatLngBounds\n\n\n  var bounds = geojson.getBounds(); // If single feature is given we just set center and zoom properties.\n  // Or if running in JSDOM, we need to avoid using 'bounds' property of leaflet\n  // which causes the tests to crash.\n\n  if (!props.data.features || props.data.features.length < 2 || process.env.JEST_WORKER_ID) {\n    // Find the center of the LatLngBounds returns LatLng\n    var center = bounds.getCenter();\n    center = [center.lat, center.lng];\n    return _react.default.createElement(_reactLeaflet.Map, {\n      center: center,\n      zoom: 10,\n      style: {\n        width: '100%',\n        height: 450\n      }\n    }, _react.default.createElement(_reactLeaflet.TileLayer, {\n      attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }), _react.default.createElement(_reactLeaflet.GeoJSON, {\n      data: props.data,\n      onEachFeature: onEachFeature\n    }));\n  }\n\n  return _react.default.createElement(_reactLeaflet.Map, {\n    bounds: bounds,\n    style: {\n      width: '100%',\n      height: 450\n    }\n  }, _react.default.createElement(_reactLeaflet.TileLayer, {\n    attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n  }), _react.default.createElement(_reactLeaflet.GeoJSON, {\n    data: props.data,\n    onEachFeature: onEachFeature\n  }));\n}\n\nfunction onEachFeature(feature, layer) {\n  if (feature.properties && feature.properties.name) {\n    layer.bindPopup(feature.properties.name);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactPdfJs = require(\"react-pdf-js\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  if (obj != null) {\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n        if (desc && (desc.get || desc.set)) {\n          Object.defineProperty(newObj, key, desc);\n        } else {\n          newObj[key] = obj[key];\n        }\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar PdfViewer = function PdfViewer(props) {\n  var _useState = (0, _react.useState)(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pages = _useState4[0],\n      setPages = _useState4[1];\n\n  var renderPagination = function renderPagination(page, pages) {\n    if (!pages) {\n      return null;\n    }\n\n    var previousButton = _react.default.createElement(\"li\", {\n      className: \"previous\",\n      onClick: function onClick() {\n        return setPage(page - 1);\n      }\n    }, _react.default.createElement(\"a\", {\n      href: \"#previous\"\n    }, _react.default.createElement(\"i\", {\n      className: \"arrow-left\"\n    }), \" Previous\"));\n\n    if (page === 1) {\n      previousButton = _react.default.createElement(\"li\", {\n        className: \"previous disabled\"\n      }, _react.default.createElement(\"a\", {\n        href: \"#previous\"\n      }, _react.default.createElement(\"i\", {\n        className: \"arrow-left\"\n      }), \" Previous\"));\n    }\n\n    var nextButton = _react.default.createElement(\"li\", {\n      className: \"next\",\n      onClick: function onClick() {\n        return setPage(page + 1);\n      }\n    }, _react.default.createElement(\"a\", {\n      href: \"#next\"\n    }, \"Next \", _react.default.createElement(\"i\", {\n      className: \"arrow-right\"\n    })));\n\n    if (page === pages) {\n      nextButton = _react.default.createElement(\"li\", {\n        className: \"next disabled\"\n      }, _react.default.createElement(\"a\", {\n        href: \"#next\"\n      }, \"Next \", _react.default.createElement(\"i\", {\n        className: \"arrow-right\"\n      })));\n    }\n\n    return _react.default.createElement(\"nav\", null, _react.default.createElement(\"ul\", {\n      className: \"pager\"\n    }, previousButton, nextButton));\n  };\n\n  var canvasEl = (0, _react.useRef)(null);\n\n  var _usePdf = (0, _reactPdfJs.usePdf)({\n    file: props.file,\n    page: page,\n    canvasEl: canvasEl\n  }),\n      _usePdf2 = _slicedToArray(_usePdf, 2),\n      loading = _usePdf2[0],\n      numPages = _usePdf2[1];\n\n  (0, _react.useEffect)(function () {\n    setPages(numPages);\n  }, [numPages]);\n  return _react.default.createElement(\"div\", null, loading && _react.default.createElement(\"span\", null, \"Loading...\"), _react.default.createElement(\"canvas\", {\n    ref: canvasEl\n  }), renderPagination(page, pages));\n};\n\nvar _default = PdfViewer;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _plotly = _interopRequireDefault(require(\"plotly.js-basic-dist\"));\n\nvar _factory = _interopRequireDefault(require(\"react-plotly.js/factory\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _default(props) {\n  var Plot = (0, _factory.default)(_plotly.default);\n  return _react.default.createElement(Plot, {\n    data: props.spec.data,\n    layout: props.spec.layout\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction getLonLat(row, fields) {\n  return fields.map(function (field, i) {\n    // strip trailing non-numeric characters such as deg, n, ...\n    var numeric = row[field].toString().match(/[-+]?[0-9]*\\.?[0-9]*/);\n\n    if (numeric) {\n      // now match valid lon or lat\n      var val = numeric[0].toString().match(/^[-+]?([1-8]?\\d(\\.\\d+)?|90(\\.0+)?)$|^[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+))$/);\n\n      if (val) {\n        if (isNaN(val[0])) throw 'Invalid lon/lat values';\n        return val[0];\n      } else {\n        throw \"Invalid lon/lat values\";\n      }\n    } else {\n      throw \"Invalid lon/lat values\";\n    }\n  });\n}\n\nfunction tableToGeoData(view) {\n  view.spec = view.spec || {};\n  view.resources[0].schema = view.resources[0].schema || {\n    fields: []\n  }; // Return object template:\n\n  var geoData = {\n    type: 'FeatureCollection',\n    features: []\n  };\n\n  if (view.resources[0]._values) {\n    view.resources[0]._values.forEach(function (data) {\n      var feature; // If geometry field exists, parse and use it:\n\n      var geometryFieldNames = ['geojson', 'geom', 'the_geom', 'geometry', 'spatial', 'location', 'geo', 'lonlat'];\n      var geometryField = view.resources[0].schema.fields.find(function (field) {\n        return geometryFieldNames.includes(field.name.toLowerCase());\n      });\n\n      if (geometryField) {\n        feature = getGeometryFromRecord(data[geometryField.name]);\n      } else {\n        // Add features based on spec:\n        feature = {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: []\n          },\n          properties: {\n            name: ''\n          }\n        }; // If lon and lat fields provided, just use it:\n\n        if (view.spec.lonField && view.spec.latField) {\n          try {\n            feature.geometry.coordinates = getLonLat(data, [view.spec.lonField, view.spec.latField]);\n          } catch (e) {\n            // warn and skip this row if invalid\n            console.warn(e);\n            return;\n          }\n        } else {\n          // Identify geopoint field based on tableschema\n          var geopointField = view.resources[0].schema.fields.find(function (field) {\n            return field.type === 'geopoint';\n          });\n\n          if (geopointField) {\n            // geopoint field is given in tableschema\n            if (geopointField.format === 'default') {\n              // Value is a comma separated string, eg, \"lon, lat\"\n              feature.geometry.coordinates = data[geopointField.name].split(',').map(function (item) {\n                return item.trim();\n              });\n            } else if (geopointField.format === 'array') {\n              feature.geometry.coordinates = data[geopointField.name];\n            } else if (geopointField.format === 'object') {\n              feature.geometry.coordinates = [data[geopointField.name]['lon'], data[geopointField.name]['lat']];\n            }\n          } else {\n            // now check for default fields\n            var latitudeFieldNames = ['lat', 'latitude'];\n            var longitudeFieldNames = ['lon', 'longitude'];\n            var latField = view.resources[0].schema.fields.find(function (field) {\n              return latitudeFieldNames.includes(field.name.toLowerCase());\n            });\n            var lonField = view.resources[0].schema.fields.find(function (field) {\n              return longitudeFieldNames.includes(field.name.toLowerCase());\n            });\n\n            if (latField && lonField) {\n              feature.geometry.coordinates = [data[lonField.name], data[latField.name]];\n            } else {\n              // No geodata found:\n              throw 'No geo data found';\n            }\n          }\n        }\n\n        if (view.spec.infobox) {\n          feature.properties.name = eval('`' + view.spec.infobox + '`');\n        }\n      }\n\n      geoData.features.push(feature);\n    });\n  }\n\n  if (geoData.features.length === 0) throw \"No geodata on resource\";\n  return geoData;\n}\n\nfunction getGeometryFromRecord(value) {\n  if (typeof value === 'string') {\n    // We *may* have a GeoJSON string representation\n    try {\n      value = JSON.parse(value);\n    } catch (e) {}\n  }\n\n  if (typeof value === 'string') {\n    value = value.replace('(', '').replace(')', '');\n    var parts = value.split(',');\n    var lat = parseCoordinateString(parts[0]);\n    var lon = parseCoordinateString(parts[1]);\n\n    if (!isNaN(lon) && !isNaN(parseFloat(lat))) {\n      return {\n        \"type\": \"Point\",\n        \"coordinates\": [lon, lat]\n      };\n    } else {\n      return null;\n    }\n  } else if (value && value.constructor.name === 'Array') {\n    // [ lon, lat ]\n    return {\n      \"type\": \"Point\",\n      \"coordinates\": [value[0], value[1]]\n    };\n  } else if (value && value.lat) {\n    // of form { lat: ..., lon: ...}\n    return {\n      \"type\": \"Point\",\n      \"coordinates\": [value.lon || value.lng, value.lat]\n    };\n  } // We o/w assume that contents of the field are a valid GeoJSON object\n\n\n  return value;\n}\n\nfunction parseCoordinateString(coord) {\n  if (typeof coord != 'string') {\n    return parseFloat(coord);\n  }\n\n  var dms = coord.split(/[^-?\\.\\d\\w]+/);\n  var deg = 0;\n  var m = 0;\n  var toDeg = [1, 60, 3600]; // conversion factors for Deg, min, sec\n\n  var i;\n\n  for (i = 0; i < dms.length; ++i) {\n    if (isNaN(parseFloat(dms[i]))) {\n      continue;\n    }\n\n    deg += parseFloat(dms[i]) / toDeg[m];\n    m += 1;\n  }\n\n  if (coord.match(/[SW]/)) {\n    deg = -1 * deg;\n  }\n\n  return deg;\n}\n\nvar _default = tableToGeoData;\nexports.default = _default;","var map = {\n\t\"./geojson.json\": 466,\n\t\"./table-schema.json\": 903,\n\t\"./topojson.json\": 467\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 902;","export const unloadDatapackage = datapackage => {\n  const unloadedDatapackage = deepClone(datapackage)\n  \n  unloadedDatapackage.resources && unloadedDatapackage.resources.forEach(resource => {\n    delete resource.data\n    delete resource._values\n  })\n  \n  unloadedDatapackage.views && unloadedDatapackage.views.forEach(view => {\n    view.resources && view.resources.forEach(resource => {\n      delete resource.data\n      delete resource._values\n    })\n  })\n\n  return unloadedDatapackage\n}\n\nexport const getEmptyView = datapackage => {\n  try {\n    return {resources: [{schema: datapackage.resources[0].schema}]}\n  } catch (e) {\n    return {}\n  }\n}\n\nexport const getDataViewChartBuilderView = (datapackage) => {\n  if (!datapackage) return {}\n\n  const views = datapackage.views || []\n\n  switch (views.length) {\n    case 1:\n      return datapackage.views[0]\n    case 2:\n      return datapackage.views[1]\n    case 3:\n      return datapackage.views[2]\n    default:\n      return getEmptyView(datapackage)\n  }\n}\n\nexport const getDataViewMapBuilderView = (datapackage) => {\n  if (!datapackage) return {}\n\n  const views = datapackage.views || []\n\n  return views.find(view => view.specType === 'tabularmap') || getEmptyView(datapackage)\n}\n\nexport const getResourceForFiltering = (datapackage) => {\n  if (!datapackage) return {}\n  return datapackage.resources[0]\n}\n\nexport const deepClone = obj => {\n  return JSON.parse(JSON.stringify(obj))\n}\n","import { deepClone } from '../utils'\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case 'DATA_VIEW_CHART_BUILDER_ACTION':\n      let stateForChartBuilder = deepClone(state)\n      stateForChartBuilder = stateForChartBuilder.map(widget => {\n        if (widget.datapackage.views[0].specType === 'simple') {\n          widget.datapackage.views[0] = action.payload\n        }\n        return widget\n      })\n      return Object.assign(deepClone(state), stateForChartBuilder)\n    case 'DATA_VIEW_MAP_BUILDER_ACTION':\n      let stateForMapBuilder = deepClone(state)\n      stateForMapBuilder = stateForMapBuilder.map(widget => {\n        if (widget.datapackage.views[0].specType === 'tabularmap') {\n          widget.datapackage.views[0] = action.payload\n        }\n        return widget\n      })\n      return Object.assign(deepClone(state), stateForMapBuilder)\n    case 'SELECT_TAB':\n      return action.payload.widgets\n    case 'FETCH_DATA_BEGIN':\n      return action.payload.widgets\n    case 'FETCH_DATA_SUCCESS':\n      return action.payload.widgets\n    case 'FETCH_DATA_FAILURE':\n      return action.payload.widgets\n    default:\n     return state\n  }\n}\n","export default (state = {}, action) => {\n  switch (action.type) {\n   case 'DATAPACKAGE_LOAD':\n    return action.payload.datapackage\n   default:\n    return state\n  }\n }\n ","export default (state = {}, action) => {\n  switch (action.type) {\n   case 'FILTER_UI_ACTION':\n    return state \n   default:\n    return state\n  }\n }\n ","import { deepClone, unloadDatapackage } from '../utils'\n\n// updates on every action and translates app state to shareable links\nexport default (state = {}, action, root) => {\n  try {\n    const clonedRoot = deepClone(root)\n    delete clonedRoot.serializedState\n    const datapackage = unloadDatapackage(clonedRoot.datapackage)\n    const widgets = clonedRoot.widgets.map(widget => {\n      widget.datapackage = unloadDatapackage(widget.datapackage)\n      widget.loading = false\n      return widget\n    })\n\n    return JSON.stringify(Object.assign(clonedRoot, {datapackage, widgets}))\n  } catch (e) {\n    console.warn(e)\n    return {}\n  }\n}\n","import { default as widgets } from './widgets'\nimport { default as datapackage } from './datapackage'\nimport { default as datastoreFilters } from './datastoreFilters'\nimport { default as serializedState } from './serializedState'\n\nexport default (state = {}, action) => {\n  return {\n    widgets: widgets(state.widgets, action),\n    datapackage: datapackage(state.datapackage, action),\n    datastoreFilters: datastoreFilters(state.datastoreFilters, action),\n    serializedState: serializedState(state.serializedState, action, state) // we pass root of tree so it can export entire app state\n  }\n}\n","import { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport rootReducer from './reducers/rootReducer'\n\nconst initialState = {\n  datastoreFilters: {\n    // Datastore specific filters\n  },\n  datapackage: {},\n  widgets: [],\n  serializedState: {}\n}\n\nexport default function configureStore(props) {\n \n return createStore(\n   rootReducer,\n   Object.assign({}, initialState, props),\n   composeWithDevTools(applyMiddleware(thunk))\n )\n}\n","import React from 'react'\nimport Loader from 'react-loader'\nimport { DataView } from '@datopian/datapackage-views-js'\n\nexport default props => {\n  const views = props.datapackage.views\n\n  return (\n  <Loader loaded={!props.loading} style={{position: \"relative\"}}>\n    <div>\n     {\n        views.map(view => <DataView key={Math.random()} datapackage={{views: [view]}} />)\n     }\n    </div>\n  </Loader>\n  )\n}\n","import React from 'react'\nimport ReactDom from 'react-dom'\n\nconst MAX_LEN = 1500\nconst slimProps = ['archiver', 'schema', 'shareLink', 'iframeText']\nconst slim = serializedState => {\n  if (serializedState.length <= MAX_LEN) return serializedState\n  const state = JSON.parse(serializedState)\n  state.datapackage.resources.forEach(resource => {\n    for (const prop in slimProps) {\n      if (resource[slimProps[prop]]) delete resource[slimProps[prop]]\n    }\n  })\n  return JSON.stringify(state)\n}\n\nexport default props => {\n  const serializedState = slim(props.serializedState)\n  // TODO this is a stub for montreal -- need to pass origin as props\n  const shareLink = `localhost:4000/data-explorer?explorer=${serializedState}`\n  const iframe = `<iframe src=\"localhost:4000/data-explorer?explorer=${serializedState}\" />`\n  const shareable = shareLink.length < 2000\n\n  const copy = (str) => {\n    // Create new element\n    var el = document.createElement('textarea')\n    // Set value (string to be copied)\n    el.value = str\n    // Set non-editable to avoid focus and move outside of view\n    el.setAttribute('readonly', '')\n    el.style = {position: 'absolute', left: '-9999px'}\n    document.body.appendChild(el)\n    // Select text inside element\n    el.select()\n    // Copy text to clipboard\n    document.execCommand('copy')\n    // Remove temporary element\n    document.body.removeChild(el)\n  }\n\n  return (\n  <div>\n    {shareable &&\n      <div className=\"dx-share-container\">\n        <div className=\"m-4\">\n          <input id=\"share-link\" className=\"border-solid border-4 border-gray-600 w-1/2 px-2\" value={shareLink} />\n          <a href=\"#/\" id=\"copy-share-link\" className=\"m-4\" onClick={() => {copy(shareLink)}}><i>copy share link</i></a>\n        </div>\n        <div className=\"m-4\">\n          <input id=\"embed\" className=\"border-solid border-4 border-gray-600 px-2 w-1/2\" value={iframe} />\n          <a href=\"#/\" id=\"copy-share-link\" className=\"m-4\" onClick={() => {copy(iframe)}}><i>copy embed text</i></a>\n        </div>\n      </div>\n    }\n    {!shareable &&\n      <p>No share link available</p>\n    }\n    </div>\n  )\n}\n","import { Dataset, open } from 'data.js'\n\nvar toArray = require('stream-to-array')\n\nfunction parseDatapackageIdentifier(stringOrJSON) {\n  try {\n    return JSON.parse(stringOrJSON)\n  } catch (e) {\n    return stringOrJSON\n  }\n}\n\n// needs to be encapsulated\n// should be library code\nexport default async dpID => {\n  const DP_ID = parseDatapackageIdentifier(dpID)\n  const tabularFormats = ['csv', 'tsv', 'dsv', 'xls', 'xlsx']\n\n  try {\n    const dataset = await Dataset.load(DP_ID)\n\n    await Promise.all(dataset.resources.map(async (file) => {\n      if (file.displayName === 'FileInline') {\n        return\n      } else if (file.descriptor.path && file.descriptor.path.includes('datastore_search')) {\n        // Datastore, e.g., when a path is a 'datastore_search' API\n        const response = await fetch(file.descriptor.path)\n        if (!response.ok) {\n          file.descriptor.unavailable = true\n          return\n        }\n        const result = await response.json()\n        file.descriptor.data = result.result.records\n        if (file.descriptor.path.includes('datastore_search_sql')) {\n          file.descriptor.totalrowcount = result.result.records[0] ? result.result.records[0].count : undefined;\n        } else {\n          file.descriptor.totalrowcount = result.result.total;\n        }\n        // Infer schema but re-open the file as it is now \"inlined\":\n        const fileInline = open({\n          data: file.descriptor.data.map(Object.values),\n          format: 'csv'\n        })\n        const headers = Object.keys(file.descriptor.data[0])\n        fileInline.descriptor.data = [headers].concat(fileInline.descriptor.data)\n        await fileInline.addSchema()\n        file.descriptor.schema = fileInline.descriptor.schema\n      } else if (file.displayName === \"FileRemote\" && tabularFormats.includes(file.descriptor.format)) {\n        // Tabular data\n        try {\n          const rowStream = await file.rows({size: 100, keyed: true})\n          const data = await toArray(rowStream)\n          if (data.length > 0) {\n            file.descriptor.data = data // This makes it FileInline\n          } else {\n            file.descriptor.unavailable = true\n          }\n          await file.addSchema()\n        } catch (e) {\n          console.warn(e)\n          file.descriptor.unavailable = true\n        }\n      } else if (file.descriptor.format.toLowerCase().includes('json')) {\n        // Geographical data\n        const response = await fetch(file.descriptor.path)\n        if (!response.ok) {\n          file.descriptor.unavailable = true\n          return\n        }\n        const result = await response.json()\n        // The '.json' files can contain geo data - check by its 'type' property\n        const geoJsonTypes = [\n          'Feature', 'FeatureCollection', 'Point', 'MultiPoint', 'LineString',\n          'MultiLineString', 'Polygon', 'MultiPolygon', 'GeometryCollection'\n        ]\n        if (geoJsonTypes.includes(result.type)) {\n          file.descriptor.data = result\n        } else {\n          // It isn't a valid GeoJSON\n          file.descriptor.unavailable = true\n          return\n        }\n      } else if (file.descriptor.format.toLowerCase() === 'pdf') {\n        return\n      } else {\n        // We can't load any other data types for now.\n        file.descriptor.unavailable = true\n      }\n    }))\n\n    return dataset.descriptor\n  } catch (e) {\n    console.warn('Failed to load a Dataset from provided datapackage id\\n' + e)\n    return DP_ID\n  }\n}\n","import loadDataset from '../utils/loadDataset'\nimport { compileView } from 'datapackage-render';\n\nexport const selectTabAction = (payload) => (dispatch, getState) => {\n  const widgets = JSON.parse(JSON.stringify(getState().widgets))\n  widgets.forEach((widget, index) => {\n    widgets[index].active = false\n    if (widget.name === payload) {\n      widgets[index].active = true\n    }\n  })\n  dispatch(selectTab({widgets}))\n}\n\nexport const filterUIAction = (payload) => async (dispatch, getState) => {\n let datapackage = JSON.parse(JSON.stringify(getState().datapackage))\n // For datastore resources, we need to remove loaded `data` attribute to\n // trigger re-fetch of a resource. This is required since we initially fetch\n // only subset of data from datastore, eg, first 100 rows. When user applies\n // filters, we need to hit datastore api and update the data.\n const newResource = JSON.parse(JSON.stringify(payload))\n const updatedDatapackage = Object.assign(datapackage, {resources: [newResource]})\n if (updatedDatapackage.resources[0].datastore_active) {\n   delete updatedDatapackage.resources[0].data\n }\n // Update state.datapackage with new resource path that includes filters (datastore query)\n dispatch(datapackageLoad({datapackage: updatedDatapackage}))\n // Set state of widgets as loading\n const loadingWidgets = JSON.parse(JSON.stringify(getState().widgets))\n    .map(widget => {\n      widget.loading = true\n      return widget\n    })\n  dispatch(fetchDataBegin({widgets: loadingWidgets}))\n  // Load dataset using new path and update state\n  datapackage = JSON.parse(JSON.stringify(getState().datapackage))\n  const loadedDataset = await loadDataset(datapackage)\n  dispatch(datapackageLoad({datapackage: loadedDataset}))\n  // Compile new data into widget views\n  const widgets = JSON.parse(JSON.stringify(getState().widgets))\n    .map(widget => {\n      widget.datapackage.views = widget.datapackage.views\n        .map(view => compileView(view, loadedDataset))\n      widget.loading = false\n      return widget\n    })\n  dispatch(fetchDataSuccess({widgets}))\n}\n\nexport const dataViewBuilderAction = (payload) => dispatch => {\n  let actionType\n  if (payload.specType === 'simple') {\n    actionType = 'DATA_VIEW_CHART_BUILDER_ACTION'\n  } else if (payload.specType === 'tabularmap') {\n    actionType = 'DATA_VIEW_MAP_BUILDER_ACTION'\n  }\n  dispatch({\n    type: actionType,\n    payload\n  })\n}\n\nexport const fetchDataAction = payload => async dispatch => {\n  const loadingWidgets = JSON.parse(JSON.stringify(payload.widgets))\n    .map(widget => {\n      widget.loading = true\n      return widget\n    })\n  dispatch(fetchDataBegin({widgets: loadingWidgets}))\n  const datapackage = JSON.parse(JSON.stringify(payload.datapackage))\n  const loadedDataset = await loadDataset(datapackage)\n  dispatch(datapackageLoad({datapackage: loadedDataset}))\n  const widgets = JSON.parse(JSON.stringify(payload.widgets))\n    .map(widget => {\n      widget.datapackage.views = widget.datapackage.views\n        .map(view => compileView(view, loadedDataset))\n      return widget\n    })\n  dispatch(fetchDataSuccess({widgets}))\n}\n\nconst selectTab = res => ({\n  type: 'SELECT_TAB',\n  payload: { ...res }\n})\n\nconst datapackageLoad = res => ({\n  type: 'DATAPACKAGE_LOAD',\n  payload: { ...res }\n})\n\nconst fetchDataBegin = res => ({\n  type: 'FETCH_DATA_BEGIN',\n  payload: { ...res }\n})\n\nconst fetchDataSuccess = res => ({\n  type: 'FETCH_DATA_SUCCESS',\n  payload: { ...res }\n})\n\nconst fetchDataFailure = err => ({\n  type: 'FETCH_DATA_FAILURE',\n  payload: { err }\n})\n","import React, {useEffect} from 'react'\nimport { connect } from 'react-redux'\nimport './App.css'\nimport { QueryBuilder } from 'datastore-query-builder'\nimport DataView from './components/DataView'\nimport Share from './components/Share'\nimport { ChartBuilder } from 'chart-builder'\nimport { MapBuilder } from 'map-builder'\nimport { Tabs, TabLink, TabContent } from 'react-tabs-redux'\nimport { filterUIAction, fetchDataAction, dataViewBuilderAction, selectTabAction } from './actions/'\nimport { getResourceForFiltering } from './utils'\n\nexport const App = props => {\n  useEffect(() => {\n    const payload = {\n      datapackage: props.datapackage,\n      widgets: props.widgets\n    }\n    props.fetchDataAction(payload)\n  }, [])\n\n  const activeWidget = props.widgets.find(widget => {\n    return widget.active\n  })\n\n  const selectedTab = activeWidget ? activeWidget.name : props.widgets[0].name\n  const tabLinks = props.widgets.map((widget) => {\n    return <TabLink to={widget.name} className='mr-4'>{widget.name}</TabLink>\n  })\n  const tabContents = props.widgets.map((widget) => {\n    return <TabContent for={widget.name}>\n      <div className=\"container flex py-6\">\n        <div className=\"w-3/4 py-3 mr-4\">\n          <DataView {...widget} />\n        </div>\n        <div className=\"w-1/4\">\n          <div className=\"w-full\">\n            <div className=\"p-4 mr-4\">\n              {\n                widget.datapackage.views[0].specType === 'simple'\n                ? <ChartBuilder view={widget.datapackage.views[0]} dataViewBuilderAction={props.dataViewBuilderAction} />\n                : ''\n              }\n              {\n                widget.datapackage.views[0].specType === 'tabularmap'\n                ? <MapBuilder view={widget.datapackage.views[0]} dataViewBuilderAction={props.dataViewBuilderAction} />\n                : ''\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    </TabContent>\n  })\n\n  return (\n    <div className=\"ml-6\">\n      {/* Data Editor (aka filters / datastore query builder) */}\n      <div className=\"container py-4\">\n        <div className=\"datastore-query-builder\">\n          {\n            props.datapackage.resources[0].datastore_active\n            ? <QueryBuilder resource={getResourceForFiltering(props.datapackage)} filterBuilderAction={props.filterUIAction} />\n            : ''\n          }\n        </div>\n      </div>\n      {/* End of Data Editor */}\n\n      {/* Widgets (aka Views and Controls/Builders) */}\n      <Tabs \n        renderActiveTabContentOnly={true}\n        handleSelect={(selectedTab) => {\n          props.selectTabAction(selectedTab)\n        }}\n        selectedTab={selectedTab}>\n          {tabLinks}\n          {tabContents}\n      </Tabs>\n      <Share serializedState={props.serializedState} />\n      {/* End of Widgets */}\n     </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n ...state\n})\n\nconst mapDispatchToProps = dispatch => ({\n filterUIAction: (payload) => dispatch(filterUIAction(payload)),\n fetchDataAction: payload => dispatch(fetchDataAction(payload)),\n dataViewBuilderAction: payload => dispatch(dataViewBuilderAction(payload)),\n selectTabAction: payload => dispatch(selectTabAction(payload))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport configureStore from './store'\nimport './App.css'\nimport App from './App'\n\nexport default props => {\n  let datapackage\n  \n  // Allow datapackage json or obj\n  if (typeof props.datapackage === 'string') {\n    try {\n      datapackage = JSON.parse(props.datapackage)\n    } catch (e) {\n      // TODO -- would be nice for the app to still load in an empty state on fail case\n      datapackage = {}\n      console.warn('Invalid datapackage', e)\n    }\n  } else if (typeof props.datapackage === 'object') {\n    datapackage = props.datapackage\n  }\n  \n  let views\n  \n  try {\n    views = JSON.parse(JSON.stringify(datapackage.views))\n    delete datapackage.views\n  } catch {\n    console.log('No views set on datapackage')\n  }\n\n  const widgetsFromViews = (views) => {\n    const widgetNames = {\n      'table': 'Table',\n      'tabularmap': 'Map',\n      'map': 'Map',\n      'simple': 'Chart'\n    }\n\n    return views.map((view, index) => {\n      return {\n        active: index === 0 ? true : false,\n        name: widgetNames[view.specType],\n        datapackage: {views: [view]}\n      }\n    })\n  }\n\n  const widgets = (props.widgets) ? props.widgets : widgetsFromViews(views)\n\n  return (\n    <Provider store={configureStore({widgets, datapackage})}>\n      <App />\n    </Provider>\n  )\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './App.css'\nimport App from './AppWithProvider'\nimport * as serviceWorker from './serviceWorker';\n\nconst instances = document.getElementsByClassName('data-explorer')\n\nfor (const instance of instances) {\n  try {\n    const props = JSON.parse(instance.getAttribute('data-datapackage'))\n    const { datapackage, ...rest} = props\n\n    ReactDOM.render(\n      <App datapackage={datapackage} {...rest} />, document.getElementById(instance.id)\n    )\n  } catch (e) {\n    console.warn('Failed to render data-explorer', e)\n  }\n}\n\nserviceWorker.unregister();\n"],"sourceRoot":""}